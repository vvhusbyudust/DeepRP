# DeepRP - æ™ºèƒ½è§’è‰²æ‰®æ¼”ä»£ç†ç³»ç»Ÿ

ä¸€ä¸ªä¸ SillyTavern æ ¼å¼å…¼å®¹çš„ AI è§’è‰²æ‰®æ¼”åº”ç”¨ï¼Œå…·æœ‰ç‹¬ç‰¹çš„å¤šä»£ç†å·¥ä½œæµã€å›¾åƒç”Ÿæˆå’Œ TTS è¯­éŸ³åˆæˆåŠŸèƒ½ã€‚

---

## ğŸ“– ç›®å½•

- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [Agent å·¥ä½œæµ](#agent-å·¥ä½œæµ)
- [Agent é…ç½®](#agent-é…ç½®)
- [SillyTavern å…¼å®¹æ€§](#sillytavern-å…¼å®¹æ€§)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [è®¸å¯è¯](#è®¸å¯è¯)
- [è‡´è°¢](#è‡´è°¢)

---

## å¿«é€Ÿå¼€å§‹

### å¯åŠ¨æ–¹å¼

åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œï¼š

```bash
.\start.bat
```

æœåŠ¡å¯åŠ¨åè®¿é—®ï¼š**http://localhost:5173**

### é¦–æ¬¡é…ç½®

1. **æ·»åŠ  LLM é…ç½®**ï¼šè®¾ç½® â†’ LLM é…ç½® â†’ æ·»åŠ  API ç«¯ç‚¹å’Œå¯†é’¥
2. **å¯¼å…¥è§’è‰²å¡**ï¼šè®¾ç½® â†’ è§’è‰² â†’ å¯¼å…¥ SillyTavern æ ¼å¼è§’è‰²å¡ (.png/.json)
3. **å¼€å§‹å¯¹è¯**ï¼šé€‰æ‹©è§’è‰²ï¼Œå¼€å§‹èŠå¤©

---

## Agent å·¥ä½œæµ

DeepRP é‡‡ç”¨ç‹¬ç‰¹çš„ **å¤šä»£ç†åä½œæ¶æ„**ï¼Œå°†ä¼ ç»Ÿçš„å• LLM å“åº”åˆ†è§£ä¸ºä¸“ä¸šåŒ–çš„å¹¶è¡Œå¤„ç†æµç¨‹ã€‚

### å·¥ä½œæµæ¶æ„å›¾

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     ç”¨æˆ·æ¶ˆæ¯  â”€â”€â†’  â”‚   Director   â”‚
                    â”‚    å¯¼æ¼”      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                     åœºæ™¯å¤§çº² (Outline)
                           â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚               â”‚               â”‚
           â–¼               â–¼               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
    â”‚    Writer    â”‚ â”‚Paint Directorâ”‚      â”‚
    â”‚    ä½œå®¶      â”‚ â”‚  ç»˜ç”»å¯¼æ¼”    â”‚      â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
           â”‚               â”‚               â”‚
           â”‚               â–¼               â”‚
           â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
           â”‚        â”‚   Painter    â”‚       â”‚
           â”‚        â”‚    ç”»å®¶      â”‚       â”‚
           â”‚        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
           â”‚               â”‚               â”‚
           â–¼               â–¼               â–¼
      å™äº‹æ–‡æœ¬          åœºæ™¯é…å›¾           â”‚
           â”‚               â”‚               â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  TTS Actor   â”‚
                    â”‚   è¯­éŸ³æ¼”å‘˜   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                      è¯­éŸ³åˆæˆ
```

### å…³é”®ç‰¹æ€§

**å¹¶è¡Œå¤„ç†**ï¼šDirector å®Œæˆåï¼Œ**Writer å’Œ Paint Director åŒæ—¶å¹¶è¡Œæ‰§è¡Œ**ï¼Œå¤§å¹…æå‡å“åº”é€Ÿåº¦ã€‚

### å„ä»£ç†èŒè´£

| ä»£ç† | èŒè´£ | è¾“å…¥ | è¾“å‡º |
|------|------|------|------|
| **Directorï¼ˆå¯¼æ¼”ï¼‰** | åˆ†æç”¨æˆ·æ„å›¾ï¼Œè§„åˆ’åœºæ™¯ | ç”¨æˆ·æ¶ˆæ¯ + ä¸Šä¸‹æ–‡ | åœºæ™¯å¤§çº² |
| **Writerï¼ˆä½œå®¶ï¼‰** | æ’°å†™å™äº‹å“åº” | åœºæ™¯å¤§çº² | å™äº‹æ–‡æœ¬ |
| **Paint Directorï¼ˆç»˜ç”»å¯¼æ¼”ï¼‰** | ç”Ÿæˆå›¾åƒæç¤ºè¯ | åœºæ™¯å¤§çº² | å›¾åƒæç¤ºè¯ |
| **Painterï¼ˆç”»å®¶ï¼‰** | è°ƒç”¨å›¾åƒ API ç”Ÿæˆå›¾ç‰‡ | å›¾åƒæç¤ºè¯ | åœºæ™¯é…å›¾ |
| **TTS Actorï¼ˆè¯­éŸ³æ¼”å‘˜ï¼‰** | å°†å¯¹è¯è½¬æ¢ä¸ºè¯­éŸ³ | å™äº‹æ–‡æœ¬ä¸­çš„å¯¹è¯ | éŸ³é¢‘æ–‡ä»¶ |

---

## Agent é…ç½®

**æ¯ä¸ªä»£ç†éƒ½éœ€è¦ç‹¬ç«‹é…ç½®**ï¼Œå¯æ ¹æ®ä»»åŠ¡ç‰¹æ€§é€‰æ‹©ä¸åŒçš„ LLM å’Œé¢„è®¾ã€‚

### é…ç½®ä½ç½®

è®¾ç½® â†’ Agent é…ç½®

### é…ç½®é¡¹è¯´æ˜

#### åŸºç¡€é…ç½®

| é…ç½®é¡¹ | è¯´æ˜ |
|--------|------|
| **Enable Agent Mode** | å¯ç”¨/ç¦ç”¨ Agent æ¨¡å¼ |
| **Director LLM** | å¯¼æ¼”ä½¿ç”¨çš„è¯­è¨€æ¨¡å‹ |
| **Director Preset** | å¯¼æ¼”ä½¿ç”¨çš„æç¤ºè¯é¢„è®¾ |
| **Writer LLM** | ä½œå®¶ä½¿ç”¨çš„è¯­è¨€æ¨¡å‹ |
| **Writer Preset** | ä½œå®¶ä½¿ç”¨çš„æç¤ºè¯é¢„è®¾ |

#### å›¾åƒç”Ÿæˆé…ç½®

| é…ç½®é¡¹ | è¯´æ˜ |
|--------|------|
| **Enable Paint** | å¯ç”¨/ç¦ç”¨é…å›¾ç”Ÿæˆ |
| **Paint Director LLM** | ç»˜ç”»å¯¼æ¼”ä½¿ç”¨çš„æ¨¡å‹ |
| **Paint Director Preset** | ç»˜ç”»å¯¼æ¼”çš„é¢„è®¾ |
| **Image Config** | å›¾åƒç”Ÿæˆé…ç½®ï¼ˆDALL-E/SD/ComfyUIï¼‰|

#### TTS é…ç½®

| é…ç½®é¡¹ | è¯´æ˜ |
|--------|------|
| **Enable TTS** | å¯ç”¨/ç¦ç”¨è¯­éŸ³åˆæˆ |
| **TTS Config** | TTS é…ç½®ï¼ˆElevenLabs/OpenAI TTSï¼‰|

### æ¨èé…ç½®

| ä»£ç† | æ¨èæ¨¡å‹ | è¯´æ˜ |
|------|----------|------|
| Director | GPT-4o / Claude | éœ€è¦å¼ºæ¨ç†èƒ½åŠ› |
| Writer | GPT-4o / DeepSeek | éœ€è¦å¥½çš„å†™ä½œèƒ½åŠ› |
| Paint Director | GPT-4o-mini | è½»é‡çº§å³å¯ |

---

## SillyTavern å…¼å®¹æ€§

DeepRP ä¸€å®šç¨‹åº¦ä¸Šå…¼å®¹ SillyTavern çš„æ ¼å¼ã€‚

### å…¼å®¹æ€§è¯´æ˜

| ç±»å‹ | æ”¯æŒç¨‹åº¦ | è¯´æ˜ |
|------|----------|------|
| **è§’è‰²å¡ç‰‡** | âœ… æ”¯æŒ | V2 æ ¼å¼ï¼ŒPNG åµŒå…¥ï¼ŒJSON æ ¼å¼ |
| **ä¸–ç•Œä¹¦** | âœ… æ”¯æŒ | å…³é”®è¯è§¦å‘ï¼Œé€’å½’æ‰«æ |
| **é¢„è®¾** | âœ… æ”¯æŒ | å®æ¨¡æ¿ï¼Œç”Ÿæˆå‚æ•° |

### æ”¯æŒçš„å®

```
{{char}}        - è§’è‰²å
{{user}}        - ç”¨æˆ·å
{{description}} - è§’è‰²æè¿°
{{personality}} - è§’è‰²æ€§æ ¼
{{scenario}}    - åœºæ™¯è®¾å®š
{{wiBefore}}    - ä¸–ç•Œä¹¦æ¡ç›®ï¼ˆè§’è‰²å‰ï¼‰
{{wiAfter}}     - ä¸–ç•Œä¹¦æ¡ç›®ï¼ˆè§’è‰²åï¼‰
{{roll:2d6}}    - æ·éª°å­
{{random:a,b,c}}- éšæœºé€‰æ‹©
```

æ‰€æœ‰å®ä¸åŒºåˆ†å¤§å°å†™ã€‚

---

## é¡¹ç›®ç»“æ„

```
DeepRP/
â”œâ”€â”€ client/                 # å‰ç«¯ (React + Vite)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/    # UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ stores/        # çŠ¶æ€ç®¡ç† (Zustand)
â”‚   â”‚   â””â”€â”€ index.css      # æ ·å¼
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ server/                 # åç«¯ (Python + FastAPI)
â”‚   â”œâ”€â”€ routers/           # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ chat.py        # èŠå¤©æ¥å£
â”‚   â”‚   â”œâ”€â”€ agent.py       # Agent æ¥å£
â”‚   â”‚   â”œâ”€â”€ characters.py  # è§’è‰²ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ worldbooks.py  # ä¸–ç•Œä¹¦ç®¡ç†
â”‚   â”‚   â””â”€â”€ presets.py     # é¢„è®¾ç®¡ç†
â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ agent/         # Agent ç®¡é“
â”‚   â”‚   â”œâ”€â”€ llm/           # LLM è°ƒç”¨
â”‚   â”‚   â”œâ”€â”€ image/         # å›¾åƒç”Ÿæˆ
â”‚   â”‚   â””â”€â”€ tts/           # è¯­éŸ³åˆæˆ
â”‚   â””â”€â”€ main.py            # å…¥å£
â”‚
â”œâ”€â”€ data/                   # è¿è¡Œæ—¶æ•°æ®
â”‚   â”œâ”€â”€ characters/        # è§’è‰²å¡ç‰‡
â”‚   â”œâ”€â”€ worldbooks/        # ä¸–ç•Œä¹¦
â”‚   â”œâ”€â”€ presets/           # é¢„è®¾
â”‚   â”œâ”€â”€ chats/             # å¯¹è¯è®°å½•
â”‚   â”œâ”€â”€ images/            # ç”Ÿæˆçš„å›¾ç‰‡
â”‚   â””â”€â”€ audio/             # ç”Ÿæˆçš„éŸ³é¢‘
â”‚
â”œâ”€â”€ scripts/                # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ docker/                 # Docker é…ç½®
â””â”€â”€ start.bat               # ä¸€é”®å¯åŠ¨
```

---

## è®¸å¯è¯

MIT License

---

## è‡´è°¢

- [SillyTavern](https://github.com/SillyTavern/SillyTavern) - æ ¼å¼å…¼å®¹æ€§å‚è€ƒ
- [FastAPI](https://fastapi.tiangolo.com/) - åç«¯æ¡†æ¶
- [React](https://react.dev/) - å‰ç«¯æ¡†æ¶
- [Zustand](https://github.com/pmndrs/zustand) - çŠ¶æ€ç®¡ç†
